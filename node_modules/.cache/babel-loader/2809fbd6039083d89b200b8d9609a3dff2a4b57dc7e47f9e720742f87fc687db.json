{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const[messages,setMessages]=useState([]);const[message,setMessage]=useState('');const arabicRegex=/[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF]/;const loadChatHistory=async()=>{const response=await fetch('http://127.0.0.1:5000/api/history');const data=await response.json();setMessages(data||[]);};useEffect(()=>{loadChatHistory();},[]);const handleSubmit=async e=>{e.preventDefault();const response=await fetch('http://127.0.0.1:5000/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message})});const data=await response.text();if(data){setMessages([...messages,{role:'user',parts:message},{role:'ai',parts:data}]);setMessage('');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md w-full text-center py-4\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\uD83C\\uDF1F AI Study Assistant \\uD83C\\uDF1F\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-full max-w-lg p-4 mt-6 bg-white shadow-md rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"messages\",className:\"flex-1 overflow-y-auto p-4 bg-gray-50 rounded-md mb-4\",children:messages.map((msg,index)=>{const direction=arabicRegex.test(msg.parts)?'rtl':'ltr';return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 \".concat(msg.role==='user'?'text-right':'text-left'),dir:direction,children:[/*#__PURE__*/_jsxs(\"strong\",{children:[msg.role==='user'?'You':'AI',\":\"]}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:msg.parts}})]},index);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"message\",name:\"message\",value:message,onChange:e=>setMessage(e.target.value),onKeyDown:e=>{console.log(\"e shift key\",e.shiftKey);console.log(\"e Enter key:\",e.key);if(!e.shiftKey&&e.key===\"Enter\"){e.preventDefault();// Prevents adding a new line\nhandleSubmit();// Triggers the submit function\n}if(e.key===e.shiftKey&&e.key===\"Enter\"){e.preventDefault();setMessage(\"\".concat(message,\"\\n\"));}},className:\"w-full p-2 border rounded-md\",placeholder:\"Type your message here...\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600\",children:\"Send\"})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-white text-center py-4 mt-auto\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Powered by DRIHMIA AI | Your Personal Study Assistant\"})})]});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Chat","messages","setMessages","message","setMessage","arabicRegex","loadChatHistory","response","fetch","data","json","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","text","role","parts","className","children","id","map","msg","index","direction","test","concat","dir","dangerouslySetInnerHTML","__html","onSubmit","type","name","value","onChange","target","onKeyDown","console","log","shiftKey","key","placeholder","required"],"sources":["/Users/redouane/git/Learning_Front_End/React_Educative/test_gemini_true_stream/AI_STUDY_ASSISTANT_REACT/ai-study-assistant/src/components/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState('');\n\n  const arabicRegex = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF]/;\n\n  const loadChatHistory = async () => {\n    const response = await fetch('http://127.0.0.1:5000/api/history');\n    const data = await response.json();\n    setMessages(data || []);\n  };\n\n  useEffect(() => {\n    loadChatHistory();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const response = await fetch('http://127.0.0.1:5000/api/chat', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ message })\n    });\n\n    const data = await response.text();\n    if (data) {\n      setMessages([...messages, { role: 'user', parts: message }, { role: 'ai', parts: data }]);\n      setMessage('');\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center min-h-screen bg-gray-100\">\n      <header className=\"bg-white shadow-md w-full text-center py-4\">\n        <h1 className=\"text-3xl font-bold\">ðŸŒŸ AI Study Assistant ðŸŒŸ</h1>\n      </header>\n      <div className=\"flex flex-col w-full max-w-lg p-4 mt-6 bg-white shadow-md rounded-lg\">\n        <div id=\"messages\" className=\"flex-1 overflow-y-auto p-4 bg-gray-50 rounded-md mb-4\">\n          {messages.map((msg, index) => {\n            const direction = arabicRegex.test(msg.parts) ? 'rtl' : 'ltr';\n            return (\n              <div key={index} className={`mb-4 ${msg.role === 'user' ? 'text-right' : 'text-left'}`} dir={direction}>\n                <strong>{msg.role === 'user' ? 'You' : 'AI'}:</strong>\n                <div dangerouslySetInnerHTML={{ __html: msg.parts }} />\n              </div>\n            );\n          })}\n        </div>\n        <form onSubmit={handleSubmit} className=\"flex items-center space-x-2\">\n          <input\n            type=\"text\"\n            id=\"message\"\n            name=\"message\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyDown={(e) => {\n              console.log(`e shift key`, e.shiftKey);\n              console.log(`e Enter key:`, e.key);\n              if (!e.shiftKey && e.key === \"Enter\") {\n                e.preventDefault(); // Prevents adding a new line\n                handleSubmit(); // Triggers the submit function\n              }\n              if (e.key === e.shiftKey && e.key === \"Enter\") {\n                e.preventDefault();\n                setMessage(`${message}\\n`);\n              }\n            }}\n            className=\"w-full p-2 border rounded-md\"\n            placeholder=\"Type your message here...\"\n            required\n          />\n          <button type=\"submit\" className=\"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600\">\n            Send\n          </button>\n        </form>\n      </div>\n      <footer className=\"bg-white text-center py-4 mt-auto\">\n        <p className=\"text-sm text-gray-600\">Powered by DRIHMIA AI | Your Personal Study Assistant</p>\n      </footer>\n    </div>\n  );\n};\n\nexport default Chat;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}